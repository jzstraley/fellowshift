# Changelog

## Phase 1 — Foundation & Core UX (2026-02-18)

- Added Dashboard home view as the default landing page after login; shows current rotation, upcoming call/float, pending requests, upcoming lectures, and active violations (admin only)
- Refactored undo system in Schedule Editor to support full undo/redo with dual stacks (max 30 snapshots); added Redo button and Ctrl+Z / Ctrl+Shift+Z keyboard bindings
- Added Validate button to Schedule Editor that runs conflict detection before saving: checks for double-booked day overrides, coverage gaps (ICU, Floor A/B, Nights), and ACGME violations
- Added global keyboard shortcuts: 1–9 to switch views, ←/→ arrow keys for month navigation in Lecture Calendar, Escape to close modals, Ctrl+K to focus search (Phase 2)
- Added session idle timeout: auto-signs out after 15 minutes of inactivity with a warning modal at 13 minutes
- Added "Home" tab to header navigation as the first entry

## 2026-02-18

- Added ACGME work hour violation checker engine that builds a day-by-day shift timeline per fellow and flags 80h weekly average, 24+4h max shift, 1-in-7 day off, and other ACGME rule violations
- Added Violations view with filters by fellow, rule, and severity
- Added violation fix suggester that proposes swap/reassignment options to resolve violations without introducing new ones
- Added "Suggest Fix" button on each violation row with expandable suggestion details
- Added swap request workflow to Vacations view (sub-view toggle between time-off requests and swap requests)
- Swap requests are backed by Supabase with approval/denial tracking
- Replaced plain localStorage with AES-GCM encrypted storage; encryption key derived from user ID
- Removed GmailIntegration component

## 2026-02-14

- Added initial clinic coverage schedule (initialClinicSchedule) with pre-assigned coverers for all 26 blocks, balanced at 4 covers per fellow
- Full dark/light theme overhaul: added explicit dark: variants to every component (StatsView, CallView, CalendarView, ClinicCoverageView, ScheduleView, ImportExportBar)
- Removed aggressive CSS !important overrides from index.css; dark mode now handled via Tailwind dark: utilities
- Fixed ImportExportBar status messages being unreadable in dark mode
- Added Changelog link to the user dropdown menu in the header
- Made Schedule view read-only; removed drag-and-drop swapping, tap-to-swap, and Vacation Mode editing
- Added rotation filter dropdown to Schedule view for highlighting all instances of a selected rotation
- Cleaned up unused schedule/vacation editing props and helper functions from ScheduleView
- Increased Stats view table font size to match Call/Float table (text-xs)

## 2026-02-10

- Current block row on the Call/Float page is now automatically highlighted with a yellow background and left border
- Added dark mode support to Call/Float Balance Check table
- Integrated Requests page with Supabase
- Vacation requests now fetch from the database scoped to the user's institution
- Program directors and chief fellows can approve/deny requests with audit tracking
- Fellows can submit vacation requests for themselves; directors can submit for any fellow
- Denied requests shown in a separate section instead of being deleted
- Falls back to local-state behavior when Supabase is not configured

## 2026-02-09

- Landing page now shows first when visiting the site; "Enter Scheduler" navigates to login
- FellowShift logo on the login page is clickable and returns to the landing page
- Removed Vacation Mode button from Schedule view
- Removed rotation swapping (drag-and-drop and tap-to-swap)
- Added rotation highlight dropdown to filter and highlight all instances of a selected rotation across the year
- Non-matching cells fade to 30% opacity when a rotation is selected
- Retained click-to-highlight on fellow names, block headers, and individual cells
